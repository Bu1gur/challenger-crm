import React, { useState, useEffect } from "react";
import * as XLSX from "xlsx";
import { saveAs } from "file-saver";
import { API_ENDPOINTS } from "../config/api";

const TABS = [
  { key: "periods", label: "–°—Ä–æ–∫–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞" },
  { key: "groups", label: "–ì—Ä—É–ø–ø—ã" },
  { key: "payments", label: "–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã" },
  { key: "freeze", label: "–£—Å–ª–æ–≤–∏—è –∑–∞–º–æ—Ä–æ–∑–∫–∏" },
];

// –ú–æ–¥–∞–ª–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è
function ConfirmModal({ open, text, onConfirm, onCancel }) {
  if (!open) return null;
  return (
    <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50 backdrop-blur-sm">
      <div className="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-xs flex flex-col items-center border border-gray-100 animate-fade-in">
        <div className="text-3xl mb-2 text-red-500">‚ö†Ô∏è</div>
        <div className="text-lg font-bold mb-4 text-gray-800 text-center">{text}</div>
        <div className="flex gap-4 mt-2">
          <button
            className="px-6 py-2 bg-gradient-to-r from-red-400 to-red-600 hover:from-red-500 hover:to-red-700 text-white rounded-xl shadow font-semibold transition-all duration-200"
            onClick={onConfirm}
          >
            –î–∞, —É–¥–∞–ª–∏—Ç—å
          </button>
          <button
            className="px-6 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl shadow font-semibold transition-all duration-200"
            onClick={onCancel}
          >
            –û—Ç–º–µ–Ω–∞
          </button>
        </div>
      </div>
    </div>
  );
}

const AdminPanel = ({
  periods, setPeriods,
  groups, setGroups,
  payments, setPayments,
  freezeSettings, setFreezeSettings
}) => {
  const [tab, setTab] = useState("periods");

  // --- CRUD –¥–ª—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä ---
  useEffect(() => {
    fetch(API_ENDPOINTS.PERIODS).then(res => res.json()).then(setPeriods).catch(() => setPeriods([]));
    fetch(API_ENDPOINTS.GROUPS).then(res => res.json()).then(setGroups).catch(() => setGroups([]));
    fetch(API_ENDPOINTS.PAYMENTS).then(res => res.json()).then(setPayments).catch(() => setPayments([]));
    fetch(API_ENDPOINTS.FREEZE_SETTINGS).then(res => res.json()).then(arr => setFreezeSettings(arr[0] || {})).catch(() => setFreezeSettings({}));
  }, [setPeriods, setGroups, setPayments, setFreezeSettings]);

  // --- –°–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ ---
  // –ü–µ—Ä–∏–æ–¥—ã
  const [newPeriod, setNewPeriod] = React.useState({ label: "", months: 1, price: "", trainings: "" });
  const [editPeriod, setEditPeriod] = React.useState(null);
  const [periodErrors, setPeriodErrors] = React.useState({});
  const validatePeriod = (period) => {
    const errors = {};
    if (!period.label) errors.label = "–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ";
    if (!period.months || period.months < 1) errors.months = "–ú–∏–Ω. 1 –º–µ—Å—è—Ü";
    if (!period.price || period.price < 1) errors.price = "–£–∫–∞–∂–∏—Ç–µ —Ü–µ–Ω—É";
    if (!period.trainings || period.trainings < 1) errors.trainings = "–ú–∏–Ω. 1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞";
    return errors;
  };

  // –ì—Ä—É–ø–ø—ã
  const [newGroup, setNewGroup] = React.useState({ name: "", days: [], timeStart: "", timeEnd: "" });
  const [editGroup, setEditGroup] = React.useState(null);
  const [groupErrors, setGroupErrors] = React.useState({});
  const weekDays = ["–ü–Ω", "–í—Ç", "–°—Ä", "–ß—Ç", "–ü—Ç", "–°–±", "–í—Å"];
  const validateGroup = (group) => {
    const errors = {};
    if (!group.name) errors.name = "–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ";
    if (!group.timeStart || !group.timeEnd) errors.time = "–£–∫–∞–∂–∏—Ç–µ –≤—Ä–µ–º—è";
    return errors;
  };

  // –°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã
  const [newPayment, setNewPayment] = React.useState({ label: "", value: "", type: "cash", banks: [] });
  const [editPayment, setEditPayment] = React.useState(null);
  const [paymentErrors, setPaymentErrors] = React.useState({});
  const paymentTypes = [
    { label: "–ù–∞–ª–∏—á–Ω—ã–µ", value: "cash" },
    { label: "–ö–∞—Ä—Ç–∞", value: "card" },
    { label: "–ü–µ—Ä–µ–≤–æ–¥", value: "transfer" },
  ];
  const [bankInput, setBankInput] = React.useState("");
  const validatePayment = (payment) => {
    const errors = {};
    if (!payment.label) errors.label = "–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ";
    if (!payment.type) errors.type = "–¢–∏–ø –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω";
    if (payment.type === "transfer" && (!payment.banks || payment.banks.length === 0)) errors.banks = "–£–∫–∞–∂–∏—Ç–µ –±–∞–Ω–∫";
    return errors;
  };

  // –£—Å–ª–æ–≤–∏—è –∑–∞–º–æ—Ä–æ–∑–∫–∏
  const [maxDays, setMaxDays] = React.useState(freezeSettings.maxDays || 30);
  const [reasons, setReasons] = React.useState(freezeSettings.reasons || []);
  const [reasonInput, setReasonInput] = React.useState("");
  const [requireConfirm, setRequireConfirm] = React.useState(!!freezeSettings.requireConfirm);
  React.useEffect(() => {
    setMaxDays(freezeSettings.maxDays || 30);
    setReasons(freezeSettings.reasons || []);
    setRequireConfirm(!!freezeSettings.requireConfirm);
  }, [freezeSettings]);

  // --- CRUD –¥–ª—è –≤—Å–µ—Ö —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ ---
  // –ü–µ—Ä–∏–æ–¥—ã
  const addPeriod = async () => {
    const errors = validatePeriod(newPeriod);
    setPeriodErrors(errors);
    if (Object.keys(errors).length > 0) return;
    
    try {
      const response = await fetch(API_ENDPOINTS.PERIODS, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          label: newPeriod.label,
          value: `${newPeriod.months}m_${Date.now()}`,
          months: Number(newPeriod.months),
          price: Number(newPeriod.price),
          trainings: Number(newPeriod.trainings),
        })
      });
      if (response.ok) {
        const createdPeriod = await response.json();
        setPeriods([...periods, createdPeriod]);
        setNewPeriod({ label: "", months: 1, price: "", trainings: "" });
        setPeriodErrors({});
      }
    } catch (error) {
      console.error('Error creating period:', error);
    }
  };
  
  const startEditPeriod = (p) => setEditPeriod({ ...p });
  
  const saveEditPeriod = async () => {
    const errors = validatePeriod(editPeriod);
    setPeriodErrors(errors);
    if (Object.keys(errors).length > 0) return;
    
    try {
      const response = await fetch(`${API_ENDPOINTS.PERIODS}/${editPeriod.id}`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          label: editPeriod.label,
          value: editPeriod.value,
          months: Number(editPeriod.months),
          price: Number(editPeriod.price),
          trainings: Number(editPeriod.trainings),
        })
      });
      if (response.ok) {
        const updatedPeriod = await response.json();
        setPeriods(periods.map(p => p.id === editPeriod.id ? updatedPeriod : p));
        setEditPeriod(null);
        setPeriodErrors({});
      }
    } catch (error) {
      console.error('Error updating period:', error);
    }
  };
  
  const deletePeriod = async (id) => {
    try {
      const response = await fetch(`${API_ENDPOINTS.PERIODS}/${id}`, {
        method: 'DELETE'
      });
      if (response.ok) {
        setPeriods(periods.filter(p => p.id !== id));
      }
    } catch (error) {
      console.error('Error deleting period:', error);
    }
  };

  // –ì—Ä—É–ø–ø—ã
  const toggleDay = (day, groupObj, setGroupObj) => {
    setGroupObj(g => ({ ...g, days: g.days.includes(day) ? g.days.filter(d => d !== day) : [...g.days, day] }));
  };
  
  const addGroup = async () => {
    const errors = validateGroup(newGroup);
    setGroupErrors(errors);
    if (Object.keys(errors).length > 0) return;
    
    try {
      const response = await fetch(API_ENDPOINTS.GROUPS, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          name: newGroup.name,
          days: newGroup.days.join(','),
          time_start: newGroup.timeStart,
          time_end: newGroup.timeEnd,
          comment: newGroup.comment || ''
        })
      });
      if (response.ok) {
        const createdGroup = await response.json();
        setGroups([...groups, createdGroup]);
        setNewGroup({ name: "", days: [], timeStart: "", timeEnd: "" });
        setGroupErrors({});
      }
    } catch (error) {
      console.error('Error creating group:', error);
    }
  };
  
  const startEditGroup = (g) => setEditGroup({ ...g, days: g.days ? g.days.split(',') : [] });
  
  const saveEditGroup = async () => {
    const errors = validateGroup(editGroup);
    setGroupErrors(errors);
    if (Object.keys(errors).length > 0) return;
    
    try {
      const response = await fetch(`${API_ENDPOINTS.GROUPS}/${editGroup.id}`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          name: editGroup.name,
          days: editGroup.days.join(','),
          time_start: editGroup.timeStart,
          time_end: editGroup.timeEnd,
          comment: editGroup.comment || ''
        })
      });
      if (response.ok) {
        const updatedGroup = await response.json();
        setGroups(groups.map(g => g.id === editGroup.id ? updatedGroup : g));
        setEditGroup(null);
        setGroupErrors({});
      }
    } catch (error) {
      console.error('Error updating group:', error);
    }
  };
  
  const deleteGroup = async (id) => {
    try {
      const response = await fetch(`${API_ENDPOINTS.GROUPS}/${id}`, {
        method: 'DELETE'
      });
      if (response.ok) {
        setGroups(groups.filter(g => g.id !== id));
      }
    } catch (error) {
      console.error('Error deleting group:', error);
    }
  };

  // –°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã
  const addBankToPayment = (edit = false) => {
    if (!bankInput) return;
    if (edit) {
      setEditPayment(p => ({ ...p, banks: [...(p.banks || []), bankInput] }));
    } else {
      setNewPayment(p => ({ ...p, banks: [...(p.banks || []), bankInput] }));
    }
    setBankInput("");
  };
  const removeBankFromPayment = (bank, edit = false) => {
    if (edit) {
      setEditPayment(p => ({ ...p, banks: (p.banks || []).filter(b => b !== bank) }));
    } else {
      setNewPayment(p => ({ ...p, banks: (p.banks || []).filter(b => b !== bank) }));
    }
  };
  const addPayment = async () => {
    const errors = validatePayment(newPayment);
    setPaymentErrors(errors);
    if (Object.keys(errors).length > 0) return;
    
    try {
      const response = await fetch(API_ENDPOINTS.PAYMENTS, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          label: newPayment.label,
          value: newPayment.type + "_" + Date.now(),
          type: newPayment.type,
          banks: newPayment.type === "transfer" ? newPayment.banks : [],
        })
      });
      if (response.ok) {
        const createdPayment = await response.json();
        setPayments([...payments, createdPayment]);
        setNewPayment({ label: "", value: "", type: "cash", banks: [] });
        setPaymentErrors({});
      }
    } catch (error) {
      console.error('Error creating payment:', error);
    }
  };
  
  const startEditPayment = (p) => setEditPayment({ ...p });
  
  const saveEditPayment = async () => {
    const errors = validatePayment(editPayment);
    setPaymentErrors(errors);
    if (Object.keys(errors).length > 0) return;
    
    try {
      const response = await fetch(`${API_ENDPOINTS.PAYMENTS}/${editPayment.id}`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          label: editPayment.label,
          value: editPayment.value,
          type: editPayment.type,
          banks: editPayment.type === "transfer" ? editPayment.banks : [],
        })
      });
      if (response.ok) {
        const updatedPayment = await response.json();
        setPayments(payments.map(p => p.id === editPayment.id ? updatedPayment : p));
        setEditPayment(null);
        setPaymentErrors({});
      }
    } catch (error) {
      console.error('Error updating payment:', error);
    }
  };
  
  const deletePayment = async (id) => {
    try {
      const response = await fetch(`${API_ENDPOINTS.PAYMENTS}/${id}`, {
        method: 'DELETE'
      });
      if (response.ok) {
        setPayments(payments.filter(p => p.id !== id));
      }
    } catch (error) {
      console.error('Error deleting payment:', error);
    }
  };

  // –£—Å–ª–æ–≤–∏—è –∑–∞–º–æ—Ä–æ–∑–∫–∏
  const saveFreezeSettings = async () => {
    try {
      const response = await fetch(API_ENDPOINTS.FREEZE_SETTINGS, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ maxDays, reasons, requireConfirm })
      });
      if (response.ok) {
        const updatedSettings = await response.json();
        setFreezeSettings(updatedSettings);
      }
    } catch (error) {
      console.error('Error saving freeze settings:', error);
    }
  };
  const addReason = () => {
    if (reasonInput && !reasons.includes(reasonInput)) {
      setReasons([...reasons, reasonInput]);
      setReasonInput("");
    }
  };
  const removeReason = (r) => setReasons(reasons.filter(x => x !== r));

  // --- –ú–æ–¥–∞–ª–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è ---
  const [confirm, setConfirm] = React.useState({ open: false, type: null, value: null, id: null });
  const askRemovePeriod = (id, label) => setConfirm({ open: true, type: "period", value: label, id });
  const askRemoveGroup = (id, name) => setConfirm({ open: true, type: "group", value: name, id });
  const askRemovePayment = (id, label) => setConfirm({ open: true, type: "payment", value: label, id });
  const handleConfirmDelete = () => {
    if (confirm.type === "period") deletePeriod(confirm.id);
    if (confirm.type === "group") deleteGroup(confirm.id);
    if (confirm.type === "payment") deletePayment(confirm.id);
    setConfirm({ open: false, type: null, value: null, id: null });
  };

  // --- –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ ---
  const handleExportRefs = () => {
    const wb = XLSX.utils.book_new();
    wb.Props = { Title: "–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ CRM" };
    XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(periods), "–ü–µ—Ä–∏–æ–¥—ã");
    XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(groups), "–ì—Ä—É–ø–ø—ã");
    XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(payments), "–û–ø–ª–∞—Ç–∞");
    XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet([freezeSettings]), "–ó–∞–º–æ—Ä–æ–∑–∫–∞");
    const wbout = XLSX.write(wb, { bookType: "xlsx", type: "array" });
    saveAs(new Blob([wbout], { type: "application/octet-stream" }), `refs_${new Date().toISOString().slice(0,10)}.xlsx`);
  };
  const handleImportRefs = (e) => {
    const file = e.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = (evt) => {
      const data = new Uint8Array(evt.target.result);
      const workbook = XLSX.read(data, { type: "array" });
      const periodsSheet = workbook.Sheets["–ü–µ—Ä–∏–æ–¥—ã"];
      if (periodsSheet && setPeriods) setPeriods(XLSX.utils.sheet_to_json(periodsSheet));
      const groupsSheet = workbook.Sheets["–ì—Ä—É–ø–ø—ã"];
      if (groupsSheet && setGroups) setGroups(XLSX.utils.sheet_to_json(groupsSheet));
      const paymentsSheet = workbook.Sheets["–û–ø–ª–∞—Ç–∞"];
      if (paymentsSheet && setPayments) setPayments(XLSX.utils.sheet_to_json(paymentsSheet));
      const freezeSheet = workbook.Sheets["–ó–∞–º–æ—Ä–æ–∑–∫–∞"];
      if (freezeSheet && setFreezeSettings) {
        const arr = XLSX.utils.sheet_to_json(freezeSheet);
        if (arr && arr[0]) setFreezeSettings(arr[0]);
      }
    };
    reader.readAsArrayBuffer(file);
  };

  return (
    <div className="space-y-6">
      {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –∫–Ω–æ–ø–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞/–∏–º–ø–æ—Ä—Ç–∞ */}
      <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
        <h2 className="text-2xl font-bold text-gray-900">
          –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
        </h2>
        <div className="flex gap-3">
          <button
            className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium text-sm transition-colors"
            onClick={handleExportRefs}
          >
            –≠–∫—Å–ø–æ—Ä—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤
          </button>
          <label className="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium text-sm transition-colors cursor-pointer">
            –ò–º–ø–æ—Ä—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤
            <input type="file" accept=".xlsx,.xls" onChange={handleImportRefs} className="hidden" />
          </label>
        </div>
      </div>

      {/* –¢–∞–±—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */}
      <div className="border-b border-gray-200">
        <nav className="-mb-px flex space-x-8">
          {TABS.map(t => (
            <button
              key={t.key}
              className={`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${
                tab === t.key
                  ? "border-blue-500 text-blue-600"
                  : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"
              }`}
              onClick={() => setTab(t.key)}
            >
              {t.label}
            </button>
          ))}
        </nav>
      </div>
      {/* –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫: –°—Ä–æ–∫–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞ */}
      {tab === "periods" && (
        <div className="space-y-6">
          <h3 className="text-lg font-semibold text-gray-900">
            –°—Ä–æ–∫–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞
          </h3>
          <div className="bg-gray-50 rounded-lg p-4">
            <div className="flex gap-4 flex-wrap items-end">
              <div className="flex flex-col">
                <label className="text-sm font-medium text-gray-700 mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                <input 
                  value={newPeriod.label} 
                  onChange={e => { 
                    setNewPeriod(p => ({ ...p, label: e.target.value })); 
                    setPeriodErrors(errors => ({ ...errors, label: undefined })); 
                  }} 
                  className={`border rounded-md px-3 py-2 w-40 ${periodErrors.label ? "border-red-300" : "border-gray-300"} focus:outline-none focus:ring-2 focus:ring-blue-500`} 
                  placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" 
                />
                {periodErrors.label && <span className="text-red-500 text-xs mt-1">{periodErrors.label}</span>}
              </div>
              <div className="flex flex-col">
                <label className="text-sm font-medium text-gray-700 mb-1">–ú–µ—Å—è—Ü–µ–≤</label>
                <input 
                  value={newPeriod.months} 
                  onChange={e => { 
                    setNewPeriod(p => ({ ...p, months: e.target.value })); 
                    setPeriodErrors(errors => ({ ...errors, months: undefined })); 
                  }} 
                  className={`border rounded-md px-3 py-2 w-20 ${periodErrors.months ? "border-red-300" : "border-gray-300"} focus:outline-none focus:ring-2 focus:ring-blue-500`} 
                  type="number" 
                  min={1} 
                />
                {periodErrors.months && <span className="text-red-500 text-xs mt-1">{periodErrors.months}</span>}
              </div>
              <div className="flex flex-col">
                <label className="text-sm font-medium text-gray-700 mb-1">–¶–µ–Ω–∞</label>
                <input 
                  value={newPeriod.price} 
                  onChange={e => { 
                    setNewPeriod(p => ({ ...p, price: e.target.value })); 
                    setPeriodErrors(errors => ({ ...errors, price: undefined })); 
                  }} 
                  className={`border rounded-md px-3 py-2 w-28 ${periodErrors.price ? "border-red-300" : "border-gray-300"} focus:outline-none focus:ring-2 focus:ring-blue-500`} 
                  type="number" 
                  min={0} 
                />
                {periodErrors.price && <span className="text-red-500 text-xs mt-1">{periodErrors.price}</span>}
              </div>
              <div className="flex flex-col">
                <label className="text-sm font-medium text-gray-700 mb-1">–¢—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</label>
                <input 
                  value={newPeriod.trainings} 
                  onChange={e => { 
                    setNewPeriod(p => ({ ...p, trainings: e.target.value })); 
                    setPeriodErrors(errors => ({ ...errors, trainings: undefined })); 
                  }} 
                  className={`border rounded-md px-3 py-2 w-28 ${periodErrors.trainings ? "border-red-300" : "border-gray-300"} focus:outline-none focus:ring-2 focus:ring-blue-500`} 
                  type="number" 
                  min={1} 
                />
                {periodErrors.trainings && <span className="text-red-500 text-xs mt-1">{periodErrors.trainings}</span>}
              </div>
              <button
                onClick={addPeriod}
                className="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md font-medium transition-colors"
                type="button"
              >
                –î–æ–±–∞–≤–∏—Ç—å
              </button>
            </div>
          </div>
          
          {/* –°–ø–∏—Å–æ–∫ –ø–µ—Ä–∏–æ–¥–æ–≤ */}
          <div className="space-y-2">
            {periods.map((p) => (
              <div key={p.id} className="flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg">
                {editPeriod && editPeriod.id === p.id ? (
                  <div className="flex gap-4 items-center flex-1">
                    <input 
                      value={editPeriod.label} 
                      onChange={e => setEditPeriod(ep => ({ ...ep, label: e.target.value }))} 
                      className="border rounded px-2 py-1 w-32" 
                    />
                    <input 
                      value={editPeriod.months} 
                      onChange={e => setEditPeriod(ep => ({ ...ep, months: e.target.value }))} 
                      className="border rounded px-2 py-1 w-16" 
                      type="number" 
                    />
                    <input 
                      value={editPeriod.price} 
                      onChange={e => setEditPeriod(ep => ({ ...ep, price: e.target.value }))} 
                      className="border rounded px-2 py-1 w-20" 
                      type="number" 
                    />
                    <input 
                      value={editPeriod.trainings} 
                      onChange={e => setEditPeriod(ep => ({ ...ep, trainings: e.target.value }))} 
                      className="border rounded px-2 py-1 w-20" 
                      type="number" 
                    />
                    <div className="flex gap-2">
                      <button onClick={saveEditPeriod} className="text-green-600 hover:text-green-700">‚úì</button>
                      <button onClick={() => setEditPeriod(null)} className="text-gray-400 hover:text-gray-600">‚úï</button>
                    </div>
                  </div>
                ) : (
                  <>
                    <div className="flex-1">
                      <span className="font-medium">{p.label}</span>
                      <span className="text-gray-500 ml-2">({p.months} –º–µ—Å., {p.price}‚ÇΩ, {p.trainings} —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫)</span>
                    </div>
                    <div className="flex gap-2">
                      <button 
                        onClick={() => startEditPeriod(p)} 
                        className="text-blue-600 hover:text-blue-700 p-1"
                        title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
                      >
                        ‚úèÔ∏è
                      </button>
                      <button 
                        onClick={() => askRemovePeriod(p.id, p.label)} 
                        className="text-red-600 hover:text-red-700 p-1"
                        title="–£–¥–∞–ª–∏—Ç—å"
                      >
                        üóëÔ∏è
                      </button>
                    </div>
                  </>
                )}
              </div>
            ))}
          </div>
        </div>
      )}
              <svg className="w-5 h-5" fill="none" stroke="currentColor" strokeWidth={2} viewBox="0 0 24 24"><path d="M12 5v14M5 12h14" /></svg>
            </button>
          </div>
          <ul className="flex flex-col gap-4">
            {periods.map((p) => (
              <li key={p.id} className="relative bg-[#F5F7FB] px-8 py-5 rounded-2xl flex items-center gap-6 shadow text-lg font-medium flex-wrap break-all group transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl animate-fade-in" style={{ minHeight: 56 }}>
                {editPeriod && editPeriod.id === p.id ? (
                  <>
                    <input value={editPeriod.label} onChange={e => setEditPeriod(ep => ({ ...ep, label: e.target.value }))} className="w-28 border rounded px-2 py-1 text-sm" />
                    <input value={editPeriod.months} type="number" min={1} onChange={e => setEditPeriod(ep => ({ ...ep, months: e.target.value }))} className="w-12 border rounded px-2 py-1 text-sm" />
                    <input value={editPeriod.price} type="number" min={0} onChange={e => setEditPeriod(ep => ({ ...ep, price: e.target.value }))} className="w-20 border rounded px-2 py-1 text-sm" />
                    <input value={editPeriod.trainings} type="number" min={1} onChange={e => setEditPeriod(ep => ({ ...ep, trainings: e.target.value }))} className="w-20 border rounded px-2 py-1 text-sm" />
                    <button onClick={saveEditPeriod} className="text-green-600 font-bold text-xl">‚úî</button>
                    <button onClick={() => setEditPeriod(null)} className="text-gray-400 font-bold text-xl">‚úñ</button>
                  </>
                ) : (
                  <>
                    <span className="break-all flex-1">{p.label} ‚Äî {p.months} –º–µ—Å, <b>{p.price} —Å–æ–º</b>, <b>{p.trainings || 0} —Ç—Ä–µ–Ω.</b></span>
                    <button
                      onClick={() => startEditPeriod(p)}
                      className="p-2 rounded-lg hover:bg-blue-100 text-blue-500 hover:text-blue-700 transition"
                      title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
                    >
                      <svg className="w-5 h-5" fill="none" stroke="currentColor" strokeWidth={2} viewBox="0 0 24 24">
                        <path d="M15.232 5.232l3.536 3.536M9 13h3l8-8a2.828 2.828 0 10-4-4l-8 8v3z" />
                      </svg>
                    </button>
                    <button
                      onClick={() => askRemovePeriod(p.id, p.label)}
                      className="p-2 rounded-lg hover:bg-red-100 text-red-400 hover:text-red-600 transition"
                      title="–£–¥–∞–ª–∏—Ç—å"
                    >
                      <svg className="w-5 h-5" fill="none" stroke="currentColor" strokeWidth={2} viewBox="0 0 24 24">
                        <path d="M6 18L18 6M6 6l12 12" />
                      </svg>
                    </button>
                  </>
                )}
              </li>
            ))}
          </ul>
        </div>
      )}
      {/* –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫: –ì—Ä—É–ø–ø—ã */}
      {tab === "groups" && (
        <div className="mb-10 border-b pb-8">
          <h3 className="font-bold mb-6 text-blue-700 text-2xl flex items-center gap-2">
            <svg className="w-7 h-7 text-blue-400" fill="none" stroke="currentColor" strokeWidth={2} viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" rx="5" /><path d="M8 12h8M12 8v8" /></svg>
            –ì—Ä—É–ø–ø—ã
          </h3>
          <div className="flex flex-col md:flex-row md:items-end gap-6 bg-white/80 rounded-2xl p-6 shadow-xl border border-gray-100 mb-4">
            <div className="flex flex-col gap-2 w-full md:w-auto">
              <input value={newGroup.name} onChange={e => { setNewGroup(g => ({ ...g, name: e.target.value })); setGroupErrors(errors => ({ ...errors, name: undefined })); }} className={`border-2 rounded-xl px-3 py-2 w-full md:w-40 bg-white focus:ring-2 focus:ring-blue-200 focus:outline-none text-base ${groupErrors.name ? "border-red-400" : "border-gray-200"}`} placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" />
              {groupErrors.name && <span className="text-red-500 text-xs">{groupErrors.name}</span>}
            </div>
            <div className="flex flex-wrap gap-2 items-center">
              {weekDays.map(day => (
                <label key={day} className={`px-2 py-1 rounded-lg cursor-pointer text-xs font-semibold transition ${newGroup.days.includes(day) ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-700'}`}> 
                  <input type="checkbox" checked={newGroup.days.includes(day)} onChange={() => toggleDay(day, newGroup, setNewGroup)} className="hidden" />
                  {day}
                </label>
              ))}
            </div>
            <div className="flex flex-col gap-2 w-full md:w-auto">
              <label className="text-xs text-gray-500 mb-1">–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞</label>
              <input
                type="time"
                value={newGroup.timeStart}
                onChange={e => setNewGroup(g => ({ ...g, timeStart: e.target.value }))}
                className={`border-2 rounded-xl px-3 py-2 w-full md:w-28 bg-white focus:ring-2 focus:ring-blue-200 focus:outline-none text-base ${groupErrors.time ? "border-red-400" : "border-gray-200"}`}
              />
            </div>
            <div className="flex flex-col gap-2 w-full md:w-auto">
              <label className="text-xs text-gray-500 mb-1">–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
              <input
                type="time"
                value={newGroup.timeEnd}
                onChange={e => setNewGroup(g => ({ ...g, timeEnd: e.target.value }))}
                className={`border-2 rounded-xl px-3 py-2 w-full md:w-28 bg-white focus:ring-2 focus:ring-blue-200 focus:outline-none text-base ${groupErrors.time ? "border-red-400" : "border-gray-200"}`}
              />
              {groupErrors.time && <span className="text-red-500 text-xs">{groupErrors.time}</span>}
            </div>
            <button
              onClick={addGroup}
              className="ml-0 md:ml-1 flex items-center gap-1 px-4 py-3 rounded-2xl bg-gradient-to-r from-green-400 to-teal-500 hover:from-green-500 hover:to-teal-600 text-white font-bold text-base shadow-xl transition-all duration-200 active:scale-95"
              style={{ minWidth: 44, minHeight: 44 }}
              type="button"
            >
              <svg className="w-5 h-5" fill="none" stroke="currentColor" strokeWidth={2} viewBox="0 0 24 24"><path d="M12 5v14M5 12h14" /></svg>
            </button>
          </div>
          <ul className="flex flex-col gap-4 mt-6">
            {groups.map((g) => (
              <li key={g.id} className="relative bg-[#F5F7FB] px-8 py-5 rounded-2xl flex flex-col md:flex-row items-start md:items-center gap-4 md:gap-6 shadow text-lg font-medium flex-wrap break-all group transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl animate-fade-in" style={{ minHeight: 56 }}>
                {editGroup && editGroup.id === g.id ? (
                  <>
                    <input value={editGroup.name} onChange={e => setEditGroup(eg => ({ ...eg, name: e.target.value }))} className="w-full md:w-28 border rounded px-2 py-1 text-sm" />
                    <div className="flex flex-wrap gap-2 items-center">
                      {weekDays.map(day => (
                        <label key={day} className={`px-2 py-1 rounded-lg cursor-pointer text-xs font-semibold transition ${editGroup.days.includes(day) ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-700'}`}> 
                          <input type="checkbox" checked={editGroup.days.includes(day)} onChange={() => toggleDay(day, editGroup, setEditGroup)} className="hidden" />
                          {day}
                        </label>
                      ))}
                    </div>
                    <input
                      type="time"
                      value={editGroup.timeStart || ""}
                      onChange={e => setEditGroup(eg => ({ ...eg, timeStart: e.target.value }))}
                      className="w-full md:w-24 border rounded px-2 py-1 text-sm"
                    />
                    <input
                      type="time"
                      value={editGroup.timeEnd || ""}
                      onChange={e => setEditGroup(eg => ({ ...eg, timeEnd: e.target.value }))}
                      className="w-full md:w-24 border rounded px-2 py-1 text-sm"
                    />
                    <button onClick={saveEditGroup} className="text-green-600 font-bold text-xl">‚úî</button>
                    <button onClick={() => setEditGroup(null)} className="text-gray-400 font-bold text-xl">‚úñ</button>
                  </>
                ) : (
                  <>
                    <span className="break-all flex-1">
                      {g.name}
                      {Array.isArray(g.days) && g.days.length > 0 && (
                        <span className="text-xs text-gray-500"> ({g.days.join(", ")})</span>
                      )}
                      {(g.timeStart && g.timeEnd) && (
                        <span className="text-xs text-blue-500 ml-2">
                          {g.timeStart}‚Äì{g.timeEnd}
                        </span>
                      )}
                    </span>
                    <button
                      onClick={() => startEditGroup(g)}
                      className="p-2 rounded-lg hover:bg-blue-100 text-blue-500 hover:text-blue-700 transition"
                      title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
                    >
                      <svg className="w-5 h-5" fill="none" stroke="currentColor" strokeWidth={2} viewBox="0 0 24 24">
                        <path d="M15.232 5.232l3.536 3.536M9 13h3l8-8a2.828 2.828 0 10-4-4l-8 8v3z" />
                      </svg>
                    </button>
                    <button
                      onClick={() => askRemoveGroup(g.id, g.name)}
                      className="p-2 rounded-lg hover:bg-red-100 text-red-400 hover:text-red-600 transition"
                      title="–£–¥–∞–ª–∏—Ç—å"
                    >
                      <svg className="w-5 h-5" fill="none" stroke="currentColor" strokeWidth={2} viewBox="0 0 24 24">
                        <path d="M6 18L18 6M6 6l12 12" />
                      </svg>
                    </button>
                  </>
                )}
              </li>
            ))}
          </ul>
        </div>
      )}
      {/* –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫: –°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã */}
      {tab === "payments" && (
        <div className="mb-10 border-b pb-8">
          <h3 className="font-bold mb-6 text-blue-700 text-2xl flex items-center gap-2">
            <svg className="w-7 h-7 text-blue-400" fill="none" stroke="currentColor" strokeWidth={2} viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" rx="5" /><path d="M8 12h8M12 8v8" /></svg>
            –°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã
          </h3>
          <div className="flex gap-4 mb-6 flex-wrap items-end bg-[#F5F7FB] rounded-2xl p-6 shadow-lg">
            <div className="flex flex-col gap-1">
              <input value={newPayment.label} onChange={e => { setNewPayment(p => ({ ...p, label: e.target.value })); setPaymentErrors(errors => ({ ...errors, label: undefined })); }} className={`border-2 rounded-xl px-3 py-2 w-40 bg-white focus:ring-2 focus:ring-blue-200 focus:outline-none text-base ${paymentErrors.label ? "border-red-400" : "border-gray-200"}`} placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" />
              {paymentErrors.label && <span className="text-red-500 text-xs">{paymentErrors.label}</span>}
            </div>
            <select value={newPayment.type} onChange={e => setNewPayment(p => ({ ...p, type: e.target.value, value: e.target.value, banks: e.target.value === 'transfer' ? p.banks : [] }))} className="border-2 rounded-xl px-3 py-2 w-28 bg-white focus:ring-2 focus:ring-blue-200 focus:outline-none text-base">
              {paymentTypes.map(pt => (
                <option key={pt.value} value={pt.value}>{pt.label}</option>
              ))}
            </select>
            {newPayment.type === "transfer" && (
              <>
                <input value={bankInput} onChange={e => setBankInput(e.target.value)} className="border-2 rounded-xl px-3 py-2 w-28 bg-white focus:ring-2 focus:ring-blue-200 focus:outline-none text-base" placeholder="–ë–∞–Ω–∫" />
                <button onClick={() => addBankToPayment(false)} className="bg-gradient-to-r from-blue-200 to-blue-400 hover:from-blue-300 hover:to-blue-500 text-blue-800 px-2 py-1 rounded-lg shadow font-bold text-xs transition-all duration-200">+ –±–∞–Ω–∫</button>
                <ul className="flex gap-1">
                  {(newPayment.banks || []).map(b => (
                    <li key={b} className="bg-gray-100 px-2 py-1 rounded flex items-center gap-1 text-xs">
                      {b}
                      <button onClick={() => removeBankFromPayment(b, false)} className="text-red-400 hover:text-red-600 ml-1">√ó</button>
                    </li>
                  ))}
                </ul>
              </>
            )}
            <button
              onClick={addPayment}
              className="ml-1 flex items-center gap-1 px-3 py-2 rounded-xl bg-gradient-to-r from-green-400 to-teal-500 hover:from-green-500 hover:to-teal-600 text-white font-bold text-base shadow transition-all duration-200 active:scale-95"
              style={{ minWidth: 36, minHeight: 36 }}
              type="button"
            >
              <svg className="w-5 h-5" fill="none" stroke="currentColor" strokeWidth={2} viewBox="0 0 24 24"><path d="M12 5v14M5 12h14" /></svg>
            </button>
          </div>
          <ul className="flex flex-col gap-4">
            {payments.map((m) => (
              <li key={m.id} className="relative bg-[#F5F7FB] px-8 py-5 rounded-2xl flex items-center gap-6 shadow text-lg font-medium flex-wrap break-all group transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl animate-fade-in" style={{ minHeight: 56 }}>
                {editPayment && editPayment.id === m.id ? (
                  <>
                    <input value={editPayment.label} onChange={e => setEditPayment(ep => ({ ...ep, label: e.target.value }))} className="w-28 border rounded px-2 py-1 text-sm" />
                    <select value={editPayment.type} onChange={e => setEditPayment(ep => ({ ...ep, type: e.target.value, value: e.target.value, banks: e.target.value === 'transfer' ? ep.banks : [] }))} className="w-24 border rounded px-2 py-1 text-sm">
                      {paymentTypes.map(pt => (
                        <option key={pt.value} value={pt.value}>{pt.label}</option>
                      ))}
                    </select>
                    {editPayment.type === "transfer" && (
                      <>
                        <input value={bankInput} onChange={e => setBankInput(e.target.value)} className="border-2 rounded-xl px-3 py-2 w-28 bg-white focus:ring-2 focus:ring-blue-200 focus:outline-none text-base" placeholder="–ë–∞–Ω–∫" />
                        <button onClick={() => addBankToPayment(true)} className="bg-gradient-to-r from-blue-200 to-blue-400 hover:from-blue-300 hover:to-blue-500 text-blue-800 px-2 py-1 rounded-lg shadow font-bold text-xs transition-all duration-200">+ –±–∞–Ω–∫</button>
                        <ul className="flex gap-1">
                          {(editPayment.banks || []).map(b => (
                            <li key={b} className="bg-gray-100 px-2 py-1 rounded flex items-center gap-1 text-xs">
                              {b}
                              <button onClick={() => removeBankFromPayment(b, true)} className="text-red-400 hover:text-red-600 ml-1">√ó</button>
                            </li>
                          ))}
                        </ul>
                      </>
                    )}
                    <button onClick={saveEditPayment} className="text-green-600 font-bold text-xl">‚úî</button>
                    <button onClick={() => setEditPayment(null)} className="text-gray-400 font-bold text-xl">‚úñ</button>
                  </>
                ) : (
                  <>
                    <span className="break-all flex-1">{m.label} <span className="text-xs text-gray-400">({paymentTypes.find(pt => pt.value === m.type)?.label})</span>
                      {m.type === "transfer" && m.banks && m.banks.length > 0 && (
                        <span className="text-xs text-gray-500 ml-2">[{m.banks.join(", ")}]</span>
                      )}
                    </span>
                    <button onClick={() => startEditPayment(m)} className="p-2 rounded-lg hover:bg-blue-100 text-blue-500 hover:text-blue-700 transition" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                      <svg className="w-5 h-5" fill="none" stroke="currentColor" strokeWidth={2} viewBox="0 0 24 24">
                        <path d="M15.232 5.232l3.536 3.536M9 13h3l8-8a2.828 2.828 0 10-4-4l-8 8v3z" />
                      </svg>
                    </button>
                    <button onClick={() => askRemovePayment(m.id, m.label)} className="p-2 rounded-lg hover:bg-red-100 text-red-400 hover:text-red-600 transition" title="–£–¥–∞–ª–∏—Ç—å">
                      <svg className="w-5 h-5" fill="none" stroke="currentColor" strokeWidth={2} viewBox="0 0 24 24">
                        <path d="M6 18L18 6M6 6l12 12" />
                      </svg>
                    </button>
                  </>
                )}
              </li>
            ))}
          </ul>
        </div>
      )}
      {/* –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫: –£—Å–ª–æ–≤–∏—è –∑–∞–º–æ—Ä–æ–∑–∫–∏ */}
      {tab === "freeze" && (
        <div className="mb-10">
          <h3 className="font-bold mb-6 text-blue-700 text-2xl flex items-center gap-2">
            <svg className="w-7 h-7 text-blue-400" fill="none" stroke="currentColor" strokeWidth={2} viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" rx="5" /><path d="M8 12h8M12 8v8" /></svg>
            –£—Å–ª–æ–≤–∏—è –∑–∞–º–æ—Ä–æ–∑–∫–∏
          </h3>
          <div className="flex flex-col md:flex-row md:items-center gap-6 bg-white/80 rounded-2xl p-6 shadow-xl border border-gray-100 mb-4">
            <div className="flex flex-col md:flex-row md:items-center gap-4 flex-1">
              <label className="text-base font-medium text-gray-700 flex items-center gap-2">
                –ú–∞–∫—Å–∏–º—É–º –¥–Ω–µ–π:
                <input type="number" min={1} value={maxDays} onChange={e => setMaxDays(Number(e.target.value))} className="border-2 rounded-xl px-3 py-2 w-20 bg-white focus:ring-2 focus:ring-blue-200 focus:outline-none text-base" />
              </label>
              <label className="text-base font-medium text-gray-700 flex items-center gap-2">
                –ü—Ä–∏—á–∏–Ω—ã:
                <input value={reasonInput} onChange={e => setReasonInput(e.target.value)} className="border-2 rounded-xl px-3 py-2 w-36 bg-white focus:ring-2 focus:ring-blue-200 focus:outline-none text-base" placeholder="–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É" />
                <button onClick={addReason} className="bg-gradient-to-r from-blue-200 to-blue-400 hover:from-blue-300 hover:to-blue-500 text-blue-800 px-3 py-2 rounded-xl shadow font-bold text-base transition-all duration-200">+</button>
              </label>
              <ul className="flex gap-2 ml-2">
                {reasons.map(r => (
                  <li key={r} className="bg-gray-100 px-2 py-1 rounded flex items-center gap-1 text-xs">
                    {r}
                    <button onClick={() => removeReason(r)} className="text-red-400 hover:text-red-600 ml-1">√ó</button>
                  </li>
                ))}
              </ul>
              <label className="flex items-center gap-2 text-base font-medium text-gray-700">
                <input type="checkbox" checked={requireConfirm} onChange={e => setRequireConfirm(e.target.checked)} />
                –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
              </label>
            </div>
            <button onClick={saveFreezeSettings} className="bg-gradient-to-r from-blue-400 to-indigo-500 hover:from-blue-500 hover:to-indigo-600 text-white px-7 py-3 rounded-2xl shadow-xl font-bold text-lg transition-all duration-200 active:scale-95 focus:outline-none focus:ring-2 focus:ring-blue-300">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          </div>
          <div className="text-base text-gray-400 mt-2">–≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–º–æ—Ä–æ–∑–∫–∏ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –∫–ª–∏–µ–Ω—Ç–∞.</div>
        </div>
      )}
      <div className="text-base text-gray-400 text-center mt-10">–í—Å–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç.</div>
      <ConfirmModal
        open={confirm.open}
        text="–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —ç–ª–µ–º–µ–Ω—Ç? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å."
        onConfirm={handleConfirmDelete}
        onCancel={() => setConfirm({ open: false, type: null, value: null })}
      />
    </div>
  );
};

export default AdminPanel;
